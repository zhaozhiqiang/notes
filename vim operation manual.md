# Vim operation manual### 批量插入注释符//- <C-v> 进入块可视模式，选中每一行行首，然后按 I （大写的i），然后输入//，然后按ESC### 批量删除注释符//- 先按v,进入visual模式,横向选中列的个数(如"#"注释符号,需要选中两列),再按Esc,再按ctrl+v 进入列编辑模式,向下或向上移动光标,选中注释部分,然后按d, 就会删除注释符号（#）### 使用命令批量添加//- :%s/^/\//\//g    在所有行首添加//- :3,7s/^/\/\//g    在3-7行行首添加//- :3,7s/^/\//\///g    在3-7行首删除//- 10i#<esc> 当前光标位置后连续插入10个字符#- 10A#<esc> 当前行末尾位置连续插入10个字符#- 10O#<esc> 当前光标位置往上连续插入10行一个字符#- :10,20s#^#//#g 在10-20行添加 // 注释- :10,20s#^//##g 在10-20行删除 // 注释- :g/^/exec "s/^/".strpart(line(".")." ", 0, 4) 在行首插入行号- :g/^/m0/ 全文内容反转- :g/^$/pu _ 把文中空行扩增一倍- :v/./.,/./-1join 压缩空行- :g/^$/,/./-j 压缩空行- :g/fred/t$ 拷贝行，从fred到文件末尾(EOF)### 跳转- <C-o> 跳转到Cursor的上一个位置- <C-i> 跳转到Cursor的下一个位置- g; 跳转到上次修改的位置- g, 跳转到下一次修改的位置(如果有)- w(e) 移动光标到下一个单词- b 移动光标到上一个单词- 0 移动光标到本行最开头- ^ 移动光标到本行最开头的字符处，或者数字0- $ 移动光标到本行结尾处- H 移动光标到屏幕的首行- M 移动光标到屏幕的中间一行- L 移动光标到屏幕的尾行- gg 移动光标到文档首，或者:1- nG 直接跳到第n行- G 移动光标到文档尾行- <c-f> 下一屏，即 page down- <c-b> 上一屏，即 page up### 缩进- :set noai nosi- :set paste-     键盘映射：-         :map <F10> :set paste<CR> 键启动paste模式-         :map <F11> :set nopaste<CR> 取消paste模式-     粘贴前按F10，粘贴后按F11- >> normal/visual模式下，当前行增加缩进- << normal/visual模式下，当前行减少缩进- <c-s-t> insert模式下，当前行增加缩进- <c-s-d> insert模式下，当前行减少缩进### 粘贴- :"+p 粘贴剪切板内容（粘贴代码是推荐使用）- :"*p 粘贴缓冲区中内容- :reg 显示所有寄存器内容- :$ xclip -out -sel clipboard 查看剪切板的内容### 删除- dd 删除一行- dw 删除一个单词- D 删除从当前光标到光标到行尾的内容- cc 删除一行并且插入新文本- d /text 删除当前行到模式中第一个匹配之间的内容，不包括匹配到行- <c-v> d 列编辑模式删除- 1,$d 删除整个文档- :%s/^\\(.*\\)\\n\\1/\\1$/ 删除重复行 非贪婪匹配- :g/^\\s*$/d 删除所有空行- :g/text/d 删除包含text的行- :g/^text/d 删除text开头的行- :g!/^text/d 删除不是text开头的行- :%norm jdd 隔行删除- di[ 删除一对 [] 中的所有字符- di( 删除一对 () 中的所有字符- di< 删除一对 <> 中的所有字符- di{ 删除一对 {} 中的所有字符- dit 删除一对 HTML/XML 的标签内部的所有字符- di"  di'  di` 删除一对引号字符 (" 或 ' 或 `) 中所有字符### 列编辑- <c-v> ctrl-v 进入VISUAL BLOCK模式，即列编辑- <c-v> 1h3j 选中两列三行- <c-v> d 删除选中的列- <c-v> c <esc> 编辑选中的列，按ESC后生效- <c-v> A; <esc> 在选中的列后插入;，按ESC后生效- <c-v> I// <esc> 在选中的列行首插入//，按ESC后生效### 折叠文本- zf 创建折叠，默认没动作需要输入后续目标指令- zf3j 从当前行往下折叠3行- zf3k 从当前行往上折叠3行- zfG 从当前行往下折叠到文件末尾- zfgg 从当前行折叠至行首- zf10G 从当前行折叠至第10行- zo 打开折叠- zc 再次折叠- v zf 折叠V模式下选中的文本，大写V为行操作- zf`a 折叠当前光标处到标记a处的文本 （ma就表示在当前光标出做a标记）- zf% 光标移至'{'时，vim会去匹配'}'，这样'{}'之间的内容就可以折叠起来- zO 打开所有当前光标下的折叠- zC 关闭所有当前光标下的折叠- zM 关闭所有折叠- zR 打开所有折叠### 标记- mx 将当前位置标记为x（x为26个大小写字母中的任一个）- 'x （单引号）只移到标记所在行的行首- `x （反引号）跳转到标记所在行列位置- `` （双反引号）来回切换- '' （双单引号）来回切换- :marks 取得所有的标记的列表，vim自身的记录也会包含在内- :delmarks x 删除指定标记- :delmarks! 删除所有标记- visualmark.vim 该插件可实现标记功能，且标记可见### 文本转换- Vu 当前行转换为小写- VU 当前行转换为大写- g~~ 当前行大小写转换- vEU 选择性转换为大小，E指从光标处到下一个空白字符处，可连续按- vE~ 选择性大小写转换，E指从光标处到下一个空白字符处，可连续按- ggguG 全文小写- ggVGg? 将全文转换为rot13码（简单加密），重复执行此命令回复原样- <c-a> 递增当前光标出的数字- <c-x> 递减当前光标处的数字- xp 左右交换光标处两字符的位置- ddp 上下交换光标处两行的位置### 复制文件- :w new_file 另存为一个新文件- :20,$w new_file 将文件从20行处到结尾另存到一个新文件中- :.,20w new_file 将光标所在行到第20行另存到一个新文件中- :20,30w >> new_file 追加当前从20到30行得内容到new_file文件中- :r other_file 把其它文件的内容插入到光标所在行的下一行- :100r other_file 把其它文件的内容插入到100行的后面- :$r other_file 把其它文件的内容插入行尾- :0r other_file 把其它文件的内容插入行首- :/parttern/r other_file 把其它文件的内容插入到首个匹配pattern的行- vim -o file1 file2 打开的两个文件上下窗口分布- vim -O file1 file2 打开的两个文件左右窗口分布- :sp new_file 横向分割出一个窗口, 并在该窗口中打开新文件- :vsp new_file 纵向分割出一个窗口, 并在该窗口中打开新文件- <c-w> w 在打开的多个窗口中切换- <c-w> q 关闭多个窗口中当前的窗口- :bufdo /searchstr/ 在所有打开的（缓冲区）文件中搜索searchstr-     1.:bufdo %s/pattern/replace/ge-     2.:update 所有缓冲区文件中替换并生效### 打开文件- vim +n file 打开文件，并将光标定位到n行- vim + file 打开文件，并将光标定位到最后一行- vim +/pattern file 打开文件，并将光标定位到pattern匹配处- vim -R file 以只读的方式打开文件- vim -r 显示已保存的缓冲区的文件- vim -r file 从已保存的缓冲区恢复文件### diff- 可以通过如下两种方式diff：-     vim -d file1 file2-     :vert diffsplit file2- 操作：- ]c 下一个不同- [c 上一个不同- <c-w> w 多个窗口间切换- <c-w> H 当前窗口移到左边- <c-w> L 当前窗口移到右边- <c-w> K 当前窗口移到上边- <c-w> J 当前窗口移到下边- dp Diff Put.将当前差异点合并过去到另一个文件- do Diff Get.将当前差异点从另一个文件合并过来- :diffupdate 如果没有实时刷新结果- <esc> u 取消修改结果- :qa 同时关闭所有比较文件- :qa! 同时强制关闭所有比较文件- :wa 同时保存所有比较文件- :wqa 同时保存并关闭所有比较文件### 文本串替换- :s/str1/str2/ str2替换当前行中首次出现的str1- :s/str1/str2/g str2替换行当前中所有的str1- :.,$ s/str1/str2/g str2替换正文当前行到末尾所有的str1- :1，$ s/str1/str2/g str2替换所有的str1- :g/str1/s//str2/g str2替换所有的str1